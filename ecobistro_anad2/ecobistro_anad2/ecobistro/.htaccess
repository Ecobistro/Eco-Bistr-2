# .htaccess - Coloque na raiz do projeto

# Configurações de upload
php_value upload_max_filesize 5M
php_value post_max_size 6M
php_value max_execution_time 30
php_value max_input_time 60
php_value memory_limit 128M

# Segurança para pasta uploads
<Files ~ "\.(php|phtml|php3|php4|php5|inc)$">
    Order deny,allow
    Deny from all
</Files>

# Permitir apenas imagens na pasta uploads
<FilesMatch "\.(jpg|jpeg|png|gif|webp)$">
    Order allow,deny
    Allow from all
</FilesMatch>

# Cache para imagens
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/webp "access plus 1 month"
</IfModule>

# Compressão
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>

# ========================================
# Se não conseguir usar .htaccess, crie um arquivo php.ini na raiz com:
# ========================================

; upload_max_filesize = 5M
; post_max_size = 6M
; max_execution_time = 30
; max_input_time = 60
; memory_limit = 128M
; file_uploads = On

# ========================================
# Estrutura de pastas recomendada:
# ========================================

# /projeto
# ├── uploads/
# │   ├── receitas/        (imagens das receitas)
# │   ├── perfil/         (fotos de perfil)
# │   ├── default-recipe.jpg (imagem padrão)
# │   └── .htaccess       (segurança da pasta uploads)
# ├── config.php
# ├── functions.php
# ├── nova-receita.php
# └── .htaccess

# ========================================
# .htaccess para pasta uploads/ (mais restritivo)
# ========================================

# Deny access to all files by default
Order Deny,Allow
Deny from all

# Allow only images
<FilesMatch "\.(jpg|jpeg|png|gif|webp)$">
    Order Allow,Deny
    Allow from all
</FilesMatch>

# Prevent execution of PHP files
<Files *.php>
    Order Deny,Allow
    Deny from all
</Files>